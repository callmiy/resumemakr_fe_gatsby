# reset password
id: resetPasswordComponent
initial: editable
states:
  editable:
    parallel: true
    states:
      form:
        parallel: true
        states:
          fields:
            email: formCtrl
            password: formCtrl
            passwordConfirmation: formCtrl
          validity:
            initial: invalid
            states:
              valid:
              invalid:
      serverErrors:
        on:
          DISMISS_SERVER_ERRORS:
            target:
              - serverErrors.inactive
              - formCtrl.edit
        context:
          errors: _
        initial: inactive
        states:
          inactive:
          active:
            enter:
              - show errors summarries
      serverSuccess:
        enter: _
  submitting: _

# form control
id: formCtrl
initial: idle
context:
  value: _
on:
  FORM_CHANGED: edit
states:
  idle: _
  edit:
    initial: changing
    on:
      BLURRED:
        cond:
          oneOf:
            -
              cond: valueIsValid
              target: valid
            -
              cond: valueIsInvalid
              target: invalid
    states:
      changing: _
      valid:
        enter:
          - change border color to success color
          - show success icon
      invalid:
        enter:
          - error color border
          - show error icon
  serverError:
    context:
      error: _
