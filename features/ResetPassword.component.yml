# reset password
id: resetPasswordComponent
initial: editable
states:
  editable:
    parallel: true
    states:
      form:
        parallel: true
        states:
          fields:
            email: formCtrl
            password: formCtrl
            passwordConfirmation: formCtrl
          validity:
            initial: invalid
            states:
              valid:
              invalid:
      serverErrors:
        on:
          DISMISS_SERVER_ERRORS:
            target:
              - serverErrors.inactive
              - formCtrl.edit
        context:
          errors: _
        initial: inactive
        states:
          inactive:
          active:
            enter:
              - show errors summarries
      serverSuccess:
        enter: _
  submitting: _

# form control
id: formCtrl
parallel: true
states:
  edit:
    context:
      value: _
    on:
      FORM_CHANGED: edit.changing
    initial: unchanged
    states:
      unchanged: _
      changed: _
      changing:
        on:
          BLURRED:
            cond:
              oneOf:
                -
              cond: valueIsValid
              target: valid
                -
              cond: valueIsInvalid
              target: invalid
        exit:
          - set value
      serverError:
        context:
          error: _
  validity:
    enter:
      - set state formCtrl.edit.changed
    initial: unvalidated
    states:
      unvalidated: _
      valid:
        enter:
          - change border color to success color
          - show success icon
      invalid:
        enter:
          - error color border
          - show error icon
